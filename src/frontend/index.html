<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ft_transcendence (dev)</title>

    <link href="./style.css" rel="stylesheet" />

    <!-- Vite HMR client (auto reloads when you change files) -->
    <script type="module" src="/@vite/client"></script>

    <!-- React Fast Refresh preamble (enables instant React updates) -->
    <script type="module">
      import RefreshRuntime from "/@react-refresh";
      RefreshRuntime.injectIntoGlobalHook(window);
      window.$RefreshReg$ = () => {};
      window.$RefreshSig$ = () => (type) => type;
      window.__vite_plugin_react_preamble_installed__ = true;
    </script>
  </head>

  <body>
    <div id="root"></div>
    <!-- Entry point for your React + TS app -->
    <script type="module" src="/main.tsx"></script>

  <!-- Chat container -->
  <div id="chat-container">
    <ul id="messages"></ul>
    <form id="form" action="">
      <input id="input" autocomplete="off" placeholder="Type a message..." />
      <button>Send</button>
      <button id="toggle-btn" type="button">Disconnect</button>
    </form>
  </div>

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
      const socket = io("https://localhost:9443");
      socket.on("connect", () => console.log("Connected:", socket.id));

        // socket.emit("message", "Hello from client!");
        //
        // socket.on("message", (msg) => {
        //   console.log("New message:", msg);
        // });

    const form = document.getElementById('form');
    const input = document.getElementById('input');
    const messages = document.getElementById('messages');
    const toggleButton = document.getElementById('toggle-btn');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      if (input.value) {
        socket.emit('chat message', input.value);
        input.value = '';
      }
    });
    socket.on('chat message', (msg) => {
      const item = document.createElement('li');
      item.textContent = msg;
      messages.appendChild(item);
      window.scrollTo(0, document.body.scrollHeight);
    });
    toggleButton.addEventListener('click', (e) => {
      e.preventDefault();
      if (socket.connected) {
        toggleButton.innerText = 'Connect';
        socket.disconnect();
      } else {
        toggleButton.innerText = 'Disconnect';
        socket.connect();
      }
    });
    </script>
  </body>
</html>


<!-- <!DOCTYPE html> 
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ft_transcendence</title>

    The built CSS (hashed for cache busting)
    <link rel="stylesheet" href="/assets/style-abc123.css" />
  </head>

  <body>
    <div id="root"></div>

    The bundled JavaScript (Vite output)
    <script type="module" src="/assets/main-def456.js"></script>
  </body>
</html> -->
